# –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –∫ –∑–∞–Ω—è—Ç–∏—é  ¬´–ü–æ–¥—ä–µ–º –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ –æ–±–ª–∞–∫–µ¬ª - –°–ø–µ—Ç–Ω–∏—Ü–∫–∏–π –î.–ò.


## –ó–∞–¥–∞–Ω–∏–µ 1
–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é –ª–µ–∫—Ü–∏–∏(—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å vpc, 2 –≤–µ–± —Å–µ—Ä–≤–µ—Ä–∞, –±–∞—Å—Ç–∏–æ–Ω —Å–µ—Ä–≤–µ—Ä)



## –ó–∞–¥–∞–Ω–∏–µ 2

–° –ø–æ–º–æ—â—å—é ansible –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ web-a –∏ web-b , —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ –Ω–∏—Ö nginx.(–Ω–∞–ø–∏—Å–∞—Ç—å –Ω—É–∂–Ω—ã–π ansible playbook)


---

## –ó–∞–¥–∞–Ω–∏–µ 3*

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏—è, –ø—Ä–∏–ª–æ–∂–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç —Å–∫—Ä–∏–ø—Ç–æ–≤, —Å–∫—Ä–∏–Ω—à–æ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

–î–æ–±–∞–≤–∏—Ç—å –µ—â–µ –æ–¥–Ω—É –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É.
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ –Ω–µ–µ –ª—é–±—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.
–í—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —Å–ª—É–∂–± —á–µ—Ä–µ–∑ Ansible.

---

## –†–µ—à–µ–Ω–∏–µ 

- #### –ò—Ç–∞–∫, –±—ã–ª–∞ –ø—Ä–æ–¥–µ–ª–∞–Ω–∞ —Å–ª–µ–¥—É—é—â–∞—è —Ä–∞–±–æ—Ç–∞

- #### –ü–æ–≤—Ç–æ—Ä–µ–Ω–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏–∑ –≤–µ–±–∏–Ω–∞—Ä–∞, –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ –µ—â–µ –æ–¥–Ω–∞ –í–ú —Å –ë–î, –±—ã–ª —Å–æ–∑–¥–∞–Ω –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ ALB, –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã nginx –Ω–∞ –º–∞—à–∏–Ω–∞—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Ansible.

---





# üåê –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ Yandex Cloud —Å Terraform –∏ Ansible
–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ–π –≤–µ–±-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ –æ–±–ª–∞–∫–µ Yandex Cloud —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Terraform –∏ Ansible.

# üìå –û–ø–∏—Å–∞–Ω–∏–µ
–ù–∞ –æ—Å–Ω–æ–≤–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≤–µ–±–∏–Ω–∞—Ä–∞ –±—ã–ª–∞ –≤–æ—Å—Å–æ–∑–¥–∞–Ω–∞ –±–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –∞ –∑–∞—Ç–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è:

## –ë–∞–∑–æ–≤–∞—è —á–∞—Å—Ç—å (–∏–∑ –≤–µ–±–∏–Ω–∞—Ä–∞):
- –°–æ–∑–¥–∞–Ω–∏–µ –æ–±–ª–∞—á–Ω–æ–π —Å–µ—Ç–∏ (VPC) —Å –¥–≤—É–º—è –ø–æ–¥—Å–µ—Ç—è–º–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –∑–æ–Ω–∞—Ö –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (ru-central1-a, ru-central1-b)
- –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ bastion-—Ö–æ—Å—Ç–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
- –ó–∞–ø—É—Å–∫ –¥–≤—É—Ö –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–æ–≤ (web-a, web-b) –≤ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –ø–æ–¥—Å–µ—Ç—è—Ö
## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ:
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–∞—è –ø–æ–¥—Å–µ—Ç—å –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)
- –ù–∞—Å—Ç—Ä–æ–µ–Ω Application Load Balancer (ALB) –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –º–µ–∂–¥—É –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞–º–∏
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –¥–≤–∞ Ansible-–ø–ª–µ–π–±—É–∫–∞:
  - playbook-web.yml ‚Äî —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç nginx –∏ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—É—é HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –∏–º–µ–Ω–µ–º –∞–≤—Ç–æ—Ä–∞ –∏ —É–∫–∞–∑–∞–Ω–∏–µ–º —Ç–µ–∫—É—â–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (web-a / web-b)
  - playbook-db.yml ‚Äî —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç PostgreSQL –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å —Å–ª—É–∂–±—ã
# üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- Yandex Cloud ‚Äî –æ–±–ª–∞—á–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
- Terraform ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∫–∞–∫ –∫–æ–¥–æ–º (IaC)
- Ansible ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è
- Ubuntu 22.04 LTS ‚Äî –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞ –≤—Å–µ—Ö –í–ú
- nginx ‚Äî –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
- PostgreSQL ‚Äî –°–£–ë–î
# üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ alb.tf                 # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Application Load Balancer
‚îú‚îÄ‚îÄ main.tf                # –û–ø–∏—Å–∞–Ω–∏–µ –í–ú (bastion, web-a, web-b, db)
‚îú‚îÄ‚îÄ network.tf             # VPC, –ø–æ–¥—Å–µ—Ç–∏, NAT, Security Groups
‚îú‚îÄ‚îÄ outputs.tf             # –í—ã–≤–æ–¥ –ø—É–±–ª–∏—á–Ω—ã—Ö IP (ALB, bastion)
‚îú‚îÄ‚îÄ variables.tf           # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Terraform
‚îú‚îÄ‚îÄ providers.tf           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ Yandex Cloud
‚îú‚îÄ‚îÄ cloud-init.yml         # –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –í–ú –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
‚îú‚îÄ‚îÄ ansible.cfg            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Ansible
‚îú‚îÄ‚îÄ playbook-web.yml       # –ü–ª–µ–π–±—É–∫ –¥–ª—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ playbook-db.yml        # –ü–ª–µ–π–±—É–∫ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ files/
    ‚îî‚îÄ‚îÄ index.html.j2      # –®–∞–±–ª–æ–Ω –∫–∞—Å—Ç–æ–º–Ω–æ–π –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```
## üñºÔ∏è –°–∫—Ä–∏–Ω—à–æ—Ç—ã

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞
![–î–∏–∞–≥—Ä–∞–º–º–∞](screenshots/Dia.png)

### Ansible Inventory (hosts.ini)
![hosts.ini](screenshots/hosts.png)

### Application Load Balancer ‚Äî —Å–µ—Ä–≤–µ—Ä web-a
![ALB –Ω–∞ web-a](screenshots/alb_a.png)

### Application Load Balancer ‚Äî —Å–µ—Ä–≤–µ—Ä web-b
![ALB –Ω–∞ web-b](screenshots/alb_b.png)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ PostgreSQL
![–¢–µ—Å—Ç –ë–î](screenshots/test_bd.png)